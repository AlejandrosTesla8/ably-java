apply plugin: 'maven'

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:1.3.1'
    }
}

allprojects {
  group = 'io.ably'

  repositories {
      mavenCentral()
      maven { url "https://raw.github.com/paddybyers/Java-WebSocket/mvn-repo/" }
  }
}

subprojects {
  version = '0.8.1'
  description = """Ably java client library"""
}

task createPom << {
    pom {
        project {
            groupId 'io.ably'
            artifactId 'ably-java'
            version '0.8.1'
            name 'Ably java client library'
            description 'A Java Realtime and REST client library for [Ably.io](https://www.ably.io), the realtime messaging service.'

			dependencies {
				dependency {
		            groupId 'org.msgpack'
		            artifactId 'msgpack-core'
		            version '0.7.0-p9'
				}
				dependency {
		            groupId 'org.java-websocket'
		            artifactId 'Java-WebSocket'
		            version '1.3.1'
				}
				dependency {
		            groupId 'com.google.code.gson'
		            artifactId 'gson'
		            version '2.4'
				}
				dependency {
		            groupId 'junit'
		            artifactId 'junit'
		            version '4.12'
				}
				dependency {
		            groupId 'com.nanohttpd'
		            artifactId 'nanohttpd'
		            version '2.1.0'
				}
			}

			scm {
				url 'scm:git:git@github.com:ably/ably-java'
				connection 'scm:git:git@github.com:ably/ably-java'
				developerConnection 'scm:git:git@github.com:ably/ably-java</developerConnection'
			}

			organization {
				name 'Ably'
				url 'http://ably.io'
			}

			issueManagement {
				system 'Github'
				url 'https://github.com/ably/ably-java/issues'
			}

			packaging 'jar'

            inceptionYear '2015'
            licenses {
                license {
                    name 'The Apache Software License, Version 2.0'
                    url 'https://raw.github.com/ably/ably-java/master/LICENSE'
                    distribution 'repo'
                }
            }
        }
    }.writeTo("pom.xml")
}
